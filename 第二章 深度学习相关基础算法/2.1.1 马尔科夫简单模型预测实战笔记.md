# 马尔科夫简单模型预测实战笔记



## 一、基于马尔可夫链的公交停靠站乘客数预测

### 1.1 题设

* 假设站点乘客数的状态具有马尔可夫性，当某一时刻有公交车停靠时， 会有一些乘客上车， 则下一时刻车辆到达时停靠站的乘客数与这一时刻剩余的乘客相关， 这一特征符合了马尔可夫链的马尔可夫性，同时在任意时刻的候车乘客只与上一时刻的乘客数相关， 而与候车时间无关。----满足马尔科夫。

* 数据

> 以该停靠站点的候车乘客数为统计对象， 按照离散时间， 在状态转移中将以时间间隔为五分钟而对停靠站点的乘客数进行计数。以工作日某一天的上午8∶ 00 ～ 10∶ 00 的两小时为统计的时间段， 其中第一组数据为时刻 8∶05 时的乘客数， 可得到 24 组数据。如下图所示：

![24组数据8-10点](./image2/markovC_shiLi_1_1.png)

图1-1 8-10点的24组数据

由表 1 可知， 该站点的乘客数区间为［12， 27］，为保证预测的准确性， 根据建模步骤可将站点的乘客数分为 3 种状态， 即状态空间为( E1， E2， E3 ) ， 其中 E1 表示乘客数为 11 ～ 16， E2 表示乘客数为 17 ～22， E3 表示乘客数为 23 ～ 28， 因此有乘客数状态空间的频数分布， 如表 2 所示。

* 于是得到对应上表的如下状态分布表

| 时间点|乘客人数|时间表|乘客人数|时间表|乘客人数|时间表|乘客人数|
|:---|:---|:---:|:---:|---:|---:|:---:|:---:|
|1 |E1|7 |E2|13|E1|9|E2|
|2 |E1|8 |E3|14|E2|20|E1|
|3 |E2|9 |E2|15|E2|21|E1|
|4 |E2|10|E2|16|E3|22|E1|
|5 |E2|11|E1|17|E3|22|E1|
|6 |E2|12|E2|18|E2|24|E1|

于是可以得到状态转移频次表如下表所示：

|  |E1|E2|E3|
|:---|:---:|:---:|:---:|
|E1|5 |3 |0 |
|E2|3 |7 |2 |
|E3|0 |2 |1 |



### 1.2 计算模型

根据马尔可夫变量的特征， 结合变量状态转移概率矩阵， 对站点乘客数的预测步骤如下:

统计时需注意: 引起乘客数状态变化的转入包括下车后仍留在站点候车的乘客; 引起乘客数状态变化的转出则包括经过停靠车辆后上车的乘客， 则有表 1。




* [C-K方程( Chapman- Kolmogorov方程)-马尔可夫链定义如下:](https://blog.csdn.net/zhujialiang18/article/details/80745878)

![C-K方程](./image2/markovC_K_part1.png)
![C-K方程](./image2/markovC_K_part2.png)
![C-K方程](./image2/markovC_K_part3.png)



### 参考文献：
[1]刘哲华.基于马尔可夫链的公交停靠站乘客数预测[J].黑龙江交通科技,2018,41(11):155-157.


## 一、最佳经营策略应用